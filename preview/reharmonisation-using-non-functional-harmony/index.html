<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Reharmonisation of a tune, using non-functional harmony - Martin Kaptein</title><meta name="description" content="A jazzy reharmonisation of the popular father Jacob tune, using non functional harmony. Also, you can download the pdf for free."><meta name="robots" content="index, follow"><meta name="generator" content="Publii Open-Source CMS for Static Site"><link rel="canonical" href="file:///Users/mkaptein172/Documents/Publii/sites/martin-kaptein/preview/reharmonisation-using-non-functional-harmony/"><link rel="amphtml" href="file:///Users/mkaptein172/Documents/Publii/sites/martin-kaptein/preview/amp/reharmonisation-using-non-functional-harmony/"><link type="application/atom+xml" rel="alternate" href="file:///Users/mkaptein172/Documents/Publii/sites/martin-kaptein/preview/feed.xml"><meta property="og:title" content="Reharmonisation of a tune, using non-functional harmony"><meta property="og:image" content="file:///Users/mkaptein172/Documents/Publii/sites/martin-kaptein/preview/media/posts/10/father-jacob-reharmonisation.jpg"><meta property="og:site_name" content="Martin Kaptein - My website"><meta property="og:description" content="A jazzy reharmonisation of the popular father Jacob tune, using non functional harmony. Also, you can download the pdf for free."><meta property="og:url" content="file:///Users/mkaptein172/Documents/Publii/sites/martin-kaptein/preview/reharmonisation-using-non-functional-harmony/"><meta property="og:type" content="article"><meta property="fb:app_id" content="650663772029023"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:site" content="@martinkaptein"><meta name="twitter:title" content="Reharmonisation of a tune, using non-functional harmony"><meta name="twitter:description" content="A jazzy reharmonisation of the popular father Jacob tune, using non functional harmony. Also, you can download the pdf for free."><meta name="twitter:image" content="file:///Users/mkaptein172/Documents/Publii/sites/martin-kaptein/preview/media/posts/10/father-jacob-reharmonisation.jpg"><link rel="shortcut icon" href="file:///Users/mkaptein172/Documents/Publii/sites/martin-kaptein/preview/media/website/favicon.ico" type="image/x-icon"><link rel="preconnect" href="https://fonts.gstatic.com/" crossorigin><link href="https://fonts.googleapis.com/css?family=PT+Serif:400,700&amp;subset=latin-ext&amp;display=swap" rel="stylesheet"><style>h1,h2,h3,h4,h5,h6,.btn,[type=button],[type=submit],button,.navbar .navbar__menu li,.navbar_mobile_sidebar .navbar__menu li,.feed__author,.post__tag,.post__share>a span,.post__nav-link>span,.footer{font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Oxygen,Ubuntu,Cantarell,"Fira Sans","Droid Sans","Helvetica Neue",Arial,sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol"}body,h1,.h1,blockquote,.search__input,.author__name,.author__info>p,.feed__item h2,.post__nav-link{font-family:'PT Serif',Georgia,"Times New Roman",Times,serif}</style><link rel="stylesheet" href="file:///Users/mkaptein172/Documents/Publii/sites/martin-kaptein/preview/assets/css/style.css?v=339f62f501588b79c008b8c2775a231a"><script type="application/ld+json">{"@context":"http://schema.org","@type":"Article","mainEntityOfPage":{"@type":"WebPage","@id":"file:///Users/mkaptein172/Documents/Publii/sites/martin-kaptein/preview/reharmonisation-using-non-functional-harmony/index.html"},"headline":"Reharmonisation of a tune, using non-functional harmony","datePublished":"2019-04-21T18:38","dateModified":"2019-04-21T18:42","image":{"@type":"ImageObject","url":"file:///Users/mkaptein172/Documents/Publii/sites/martin-kaptein/preview/media/posts/10/father-jacob-reharmonisation.jpg","height":442,"width":600},"description":"IntroductionIn this blog post, I would like to write about the topic of reharmonisation, in particular, harmonisation using non-functional harmony. I will present an example of reharmonisation of a very simple tune (father Jacob), to make it much more interesting, and give it a completely&hellip;","author":{"@type":"Person","name":"Martin Kaptein"},"publisher":{"@type":"Organization","name":"Martin Kaptein","logo":{"@type":"ImageObject","url":"file:///Users/mkaptein172/Documents/Publii/sites/martin-kaptein/preview/media/website/logo.png","height":705,"width":705}}}</script><script async src="file:///Users/mkaptein172/Documents/Publii/sites/martin-kaptein/preview/assets/js/lazysizes.min.js?v=9c0e65e25f8f098037678ba0c2be1d9f"></script><script async src="https://www.googletagmanager.com/gtag/js?id=UA-86096566-3"></script><script>window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-86096566-3');</script></head><body><div class="site-container"><header class="top" id="js-header"><a class="logo" href="file:///Users/mkaptein172/Documents/Publii/sites/martin-kaptein/preview/index.html"><img src="file:///Users/mkaptein172/Documents/Publii/sites/martin-kaptein/preview/media/website/logo.png" alt="Martin Kaptein"></a><nav class="navbar js-navbar"><button class="navbar__toggle js-toggle" aria-label="Menu" aria-haspopup="true" aria-expanded="false"><span class="navbar__toggle-box"><span class="navbar__toggle-inner">Menu</span></span></button><ul class="navbar__menu"><li><a href="file:///Users/mkaptein172/Documents/Publii/sites/martin-kaptein/preview/about/index.html" target="_self">About</a></li><li><a href="file:///Users/mkaptein172/Documents/Publii/sites/martin-kaptein/preview/contact/index.html" target="_self">Contact</a></li><li><a href="file:///Users/mkaptein172/Documents/Publii/sites/martin-kaptein/preview/piano-and-music-theory-lessons/index.html" target="_self">Music lessons</a></li><li class="has-submenu"><span class="is-separator" aria-haspopup="true">Nederlands</span><ul class="navbar__submenu level-2" aria-hidden="true"><li><a href="file:///Users/mkaptein172/Documents/Publii/sites/martin-kaptein/preview/piano-lessen-en-muziek-theorie-lessen/index.html" target="_self">Muziek lessen</a></li><li><a href="file:///Users/mkaptein172/Documents/Publii/sites/martin-kaptein/preview/computer-hulp-en-bouw-van-websites/index.html" target="_self">IT diensten</a></li></ul></li></ul></nav><div class="search"><div class="search__overlay js-search-overlay"><div class="search__overlay-inner"><form action="file:///Users/mkaptein172/Documents/Publii/sites/martin-kaptein/preview/search.html" class="search__form"><input class="search__input js-search-input" type="search" name="q" placeholder="search..." autofocus="autofocus"></form><button class="search__close js-search-close" aria-label="Close">Close</button></div></div><button class="search__btn js-search-btn" aria-label="Search"><svg role="presentation" focusable="false"><use xlink:href="file:///Users/mkaptein172/Documents/Publii/sites/martin-kaptein/preview/assets/svg/svg-map.svg#search"/></svg></button></div></header><main><article class="post"><div class="hero"><figure class="hero__image"><img class="hero__image-img lazyload" src="file:///Users/mkaptein172/Documents/Publii/sites/martin-kaptein/preview/media/posts/10/responsive/father-jacob-reharmonisation-xs.jpg" data-srcset="file:///Users/mkaptein172/Documents/Publii/sites/martin-kaptein/preview/media/posts/10/responsive/father-jacob-reharmonisation-xs.jpg 300w ,file:///Users/mkaptein172/Documents/Publii/sites/martin-kaptein/preview/media/posts/10/responsive/father-jacob-reharmonisation-sm.jpg 480w ,file:///Users/mkaptein172/Documents/Publii/sites/martin-kaptein/preview/media/posts/10/responsive/father-jacob-reharmonisation-md.jpg 768w ,file:///Users/mkaptein172/Documents/Publii/sites/martin-kaptein/preview/media/posts/10/responsive/father-jacob-reharmonisation-lg.jpg 1024w ,file:///Users/mkaptein172/Documents/Publii/sites/martin-kaptein/preview/media/posts/10/responsive/father-jacob-reharmonisation-xl.jpg 1360w ,file:///Users/mkaptein172/Documents/Publii/sites/martin-kaptein/preview/media/posts/10/responsive/father-jacob-reharmonisation-2xl.jpg 1600w" data-sizes="auto" alt="" height="442" width="600"></figure><header class="hero__content"><div class="wrapper"><div class="post__meta"><time datetime="2019-04-21T18:38">April 21, 2019</time></div><h1>Reharmonisation of a tune, using non-functional harmony</h1><div class="post__meta post__meta--author"><img src="file:///Users/mkaptein172/Documents/Publii/sites/martin-kaptein/preview/media/website/martin-kaptein-hero-copy.JPG" class="post__author-thumb" alt="Martin Kaptein"> <a href="file:///Users/mkaptein172/Documents/Publii/sites/martin-kaptein/preview/authors/martinkaptein/index.html" class="feed__author invert">Martin Kaptein</a></div></div></header></div><div class="wrapper post__entry"><h1 data-breakpage="">Introduction</h1><p>In this blog post, I would like to write about the topic of <strong>reharmonisation</strong>, in particular, <strong>harmonisation using non-functional harmony</strong>.</p><p>I will present an example of reharmonisation of a very simple tune (father Jacob), to make it much more interesting, and give it a completely different appearance.</p><h2>What is non-functional harmony</h2><p>One might wonder, what is non-functional harmony?</p><p>Whilst functional harmony always tends to have functions, such as the tonic (1st, 3rd, 6th grade), dominant (5th, 7th grade), subdominant (2nd, 4th grade), secondary V and much more, non-functional harmony is completely free.</p><p>Functional harmony (usually) progresses towards the tonic while establishing (also usually) one or more tonalities. Non-functional harmony omits many traditional harmonic concepts and transcends them.</p><p>At this point, it is important to note that definitions of functional harmony always change, and develop (from baroque style counterpoint to Schoenberg's twelve tone music). Quite frankly, it is not always possible nor senseful to distinguish between those two.</p><p>Non-functional harmony, can be as, if not much more, complicated than functional harmony.</p><p>Also, non functional harmony is mainly about using your ears (and intuitions) rather than a set of predefined rules. This makes it very interesting, and in the following part of this blog, I will show an example.</p><h2>Reharmonisation of the tune Father Jacob</h2><p>In the case, that you are not familiar with this tune, here it is:</p><figure class="post__image"><img class="lazyload" src="file:///Users/mkaptein172/Documents/Publii/sites/martin-kaptein/preview/media/posts/10/responsive/father-jacob-original-xs.jpg" data-sizes="auto" data-srcset="file:///Users/mkaptein172/Documents/Publii/sites/martin-kaptein/preview/media/posts/10/responsive/father-jacob-original-xs.jpg 300w ,file:///Users/mkaptein172/Documents/Publii/sites/martin-kaptein/preview/media/posts/10/responsive/father-jacob-original-sm.jpg 480w ,file:///Users/mkaptein172/Documents/Publii/sites/martin-kaptein/preview/media/posts/10/responsive/father-jacob-original-md.jpg 768w ,file:///Users/mkaptein172/Documents/Publii/sites/martin-kaptein/preview/media/posts/10/responsive/father-jacob-original-lg.jpg 1024w ,file:///Users/mkaptein172/Documents/Publii/sites/martin-kaptein/preview/media/posts/10/responsive/father-jacob-original-xl.jpg 1360w ,file:///Users/mkaptein172/Documents/Publii/sites/martin-kaptein/preview/media/posts/10/responsive/father-jacob-original-2xl.jpg 1600w" alt="Father Jacob original tune" width="808" height="208"></figure><p><em>This is the original father Jacob tune</em></p><p>As you can see, it is indeed very simple, and does not have any particularly interesting (functional) harmonic features, which makes it a very good contestant to begin experimenting with non-functional harmonies.</p><p>Here is my, slightly over-the-top take on harmonising father Jacob.</p><figure class="post__image"><img class="lazyload" src="file:///Users/mkaptein172/Documents/Publii/sites/martin-kaptein/preview/media/posts/10/responsive/father-jacob-reharmonisation-xs.jpg" data-sizes="auto" data-srcset="file:///Users/mkaptein172/Documents/Publii/sites/martin-kaptein/preview/media/posts/10/responsive/father-jacob-reharmonisation-xs.jpg 300w ,file:///Users/mkaptein172/Documents/Publii/sites/martin-kaptein/preview/media/posts/10/responsive/father-jacob-reharmonisation-sm.jpg 480w ,file:///Users/mkaptein172/Documents/Publii/sites/martin-kaptein/preview/media/posts/10/responsive/father-jacob-reharmonisation-md.jpg 768w ,file:///Users/mkaptein172/Documents/Publii/sites/martin-kaptein/preview/media/posts/10/responsive/father-jacob-reharmonisation-lg.jpg 1024w ,file:///Users/mkaptein172/Documents/Publii/sites/martin-kaptein/preview/media/posts/10/responsive/father-jacob-reharmonisation-xl.jpg 1360w ,file:///Users/mkaptein172/Documents/Publii/sites/martin-kaptein/preview/media/posts/10/responsive/father-jacob-reharmonisation-2xl.jpg 1600w" alt="Father Jacob reharmonization" width="600" height="442"></figure><p><em>Father Jacob meets non-functional harmony</em></p><p>Also, <a href="../Father_Jacob_-_Reharmonisation.pdf" title="Father Jacob reharmonization">here is the pdf version to download for free</a>.</p><h2>Choosing the chords</h2><p>In this example, the only thing given is the melody, so it makes sense to search for chords, which fit to the melody. In order to do that you can interpret the melody as, for example the 13th of a dom7 chord (minus the dominant function, of course).</p><p>But there are countless other possibilities, you can use different options, chords, inversions, voicings and much more.</p><p>In this example I chose for very complicated chords (mostly), which move in a homophonic way, together with the melody. This is purely a demonstration of what is possible (but, probably, not entirely necessary).</p><h2>Bass line</h2><p>An other way, is to think first of a fitting bass line, for example the chromatic line in Bar 2, and then build the chords on that.</p><h2>Color and mood</h2><p>One of the most important aspects is to find the right music color, you would like to have, as it does influence the mood. Also, pay attention to the voicing and the register of the notes.</p><p>Last but not least, make it (more or less) playable:)</p><h2>Summary and conclusion</h2><p>This is an amazing exercise to boost your creativity and break free (for a short time) from all the ‘traditional’ music concepts.</p><p>It can lead to many interesting results.</p><p>Also, it is interesting to have fusion between functional and non-functional harmonies, as they can complement each other very nicely. An example for this is the II, V, I (2, 5, 1) progression and the end, Bar 15 and 16.</p><blockquote><p>But in the end, it is all about your ears, your interpretation and your ideas. And non-functional harmony is a beautiful tool to make these elements come alive.</p></blockquote></div><footer class="wrapper post__footer"><p class="post__last-updated">This article was updated on April 21, 2019</p><ul class="post__tag"><li><a href="file:///Users/mkaptein172/Documents/Publii/sites/martin-kaptein/preview/tags/blog/index.html">Blog</a></li><li><a href="file:///Users/mkaptein172/Documents/Publii/sites/martin-kaptein/preview/tags/music/index.html">Music</a></li></ul><div class="post__share"><a href="https://www.facebook.com/sharer/sharer.php?u=file%3A%2F%2F%2FUsers%2Fmkaptein172%2FDocuments%2FPublii%2Fsites%2Fmartin-kaptein%2Fpreview%2Freharmonisation-using-non-functional-harmony%2Findex.html" class="js-share facebook" rel="nofollow noopener noreferrer"><svg class="icon" aria-hidden="true" focusable="false"><use xlink:href="file:///Users/mkaptein172/Documents/Publii/sites/martin-kaptein/preview/assets/svg/svg-map.svg#facebook"/></svg> <span>Facebook</span> </a><a href="https://twitter.com/share?url=file%3A%2F%2F%2FUsers%2Fmkaptein172%2FDocuments%2FPublii%2Fsites%2Fmartin-kaptein%2Fpreview%2Freharmonisation-using-non-functional-harmony%2Findex.html&amp;via=%40MartinKaptein&amp;text=Reharmonisation%20of%20a%20tune%2C%20using%20non-functional%20harmony" class="js-share twitter" rel="nofollow noopener noreferrer"><svg class="icon" aria-hidden="true" focusable="false"><use xlink:href="file:///Users/mkaptein172/Documents/Publii/sites/martin-kaptein/preview/assets/svg/svg-map.svg#twitter"/></svg> <span>Twitter</span></a></div><div class="post__bio bio"><img src="file:///Users/mkaptein172/Documents/Publii/sites/martin-kaptein/preview/media/website/martin-kaptein-hero-copy.JPG" alt="Martin Kaptein" class="bio__avatar"><div class="bio__info"><h3 class="bio__name"><a href="file:///Users/mkaptein172/Documents/Publii/sites/martin-kaptein/preview/authors/martinkaptein/index.html" class="invert" rel="author">Martin Kaptein</a></h3><p>Martin Kaptein is the author on the website on martinkaptein.com.</p></div></div></footer></article><nav class="post__nav"><div class="post__nav-inner"><div class="post__nav-prev"><svg width="1.041em" height="0.416em" aria-hidden="true"><use xlink:href="file:///Users/mkaptein172/Documents/Publii/sites/martin-kaptein/preview/assets/svg/svg-map.svg#arrow-prev"/></svg> <a href="file:///Users/mkaptein172/Documents/Publii/sites/martin-kaptein/preview/machine-learning-introduction-python-scikit-learn/index.html" class="invert post__nav-link" rel="prev"><span>Previous</span> Using machine learning to predict integers from a training set</a></div><div class="post__nav-next"><a href="file:///Users/mkaptein172/Documents/Publii/sites/martin-kaptein/preview/analysing-quote-life-is-paradoxically-coincidental/index.html" class="invert post__nav-link" rel="next"><span>Next</span> Analysing a Quote </a><svg width="1.041em" height="0.416em" aria-hidden="true"><use xlink:href="file:///Users/mkaptein172/Documents/Publii/sites/martin-kaptein/preview/assets/svg/svg-map.svg#arrow-next"/></svg></div></div></nav><div class="post__related related"><div class="wrapper"><h2 class="h5 related__title">You should also read:</h2><article class="related__item"><div class="feed__meta"><time datetime="2019-04-22T15:52" class="feed__date">April 22, 2019</time></div><h3 class="h1"><a href="file:///Users/mkaptein172/Documents/Publii/sites/martin-kaptein/preview/hugo-with-travis-ci-on-gh-pages/index.html" class="invert">Using Hugo with Travis CI on GitHub Pages</a></h3></article><article class="related__item"><div class="feed__meta"><time datetime="2019-04-21T18:34" class="feed__date">April 21, 2019</time></div><h3 class="h1"><a href="file:///Users/mkaptein172/Documents/Publii/sites/martin-kaptein/preview/machine-learning-introduction-python-scikit-learn/index.html" class="invert">Using machine learning to predict integers from a training set</a></h3></article><article class="related__item"><div class="feed__meta"><time datetime="2019-04-21T16:16" class="feed__date">April 21, 2019</time></div><h3 class="h1"><a href="file:///Users/mkaptein172/Documents/Publii/sites/martin-kaptein/preview/using-a-nexus-4-in-2018/index.html" class="invert">Using a Nexus 4 in 2018</a></h3></article></div></div><div class="post__comments"><div class="wrapper"><h2 class="h5">Comments</h2><div id="disqus_thread"></div><script>var disqus_config = function () {
                       this.page.url = 'file:///Users/mkaptein172/Documents/Publii/sites/martin-kaptein/preview/reharmonisation-using-non-functional-harmony/index.html';
               		this.page.identifier = '10';
                       this.page.title = ' Reharmonisation of a tune, using non-functional harmony';
                   };
               
                   var disqus_loaded = false;
               
                   function publiiLoadDisqus() {
                       if(disqus_loaded) {
                           return false;
                       }
               
                       var top = document.getElementById('disqus_thread').offsetTop;
               
                       if (!disqus_loaded && (window.scrollY || window.pageYOffset) + window.innerHeight > top) {
                           disqus_loaded = true;
               
                           (function () {
                               var d = document, s = d.createElement('script');
                               s.src = 'https://martinkaptein.disqus.com/embed.js';
                               s.setAttribute('data-timestamp', +new Date());
                               (d.head || d.body).appendChild(s);
                           })();
                       }
                   }
               
                   publiiLoadDisqus();
               
                   window.onscroll = function() {
                       publiiLoadDisqus();
                   };</script><noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript></div></div></main><footer class="footer"><div class="footer__social"><a href="https://www.facebook.com/martin.kaptein" aria-label="Facebook"><svg><use xlink:href="file:///Users/mkaptein172/Documents/Publii/sites/martin-kaptein/preview/assets/svg/svg-map.svg#facebook"/></svg> </a><a href="https://twitter.com/MartinKaptein/" aria-label="Twitter"><svg><use xlink:href="file:///Users/mkaptein172/Documents/Publii/sites/martin-kaptein/preview/assets/svg/svg-map.svg#twitter"/></svg> </a><a href="https://www.instagram.com/martinkaptein/" aria-label="Instagram"><svg><use xlink:href="file:///Users/mkaptein172/Documents/Publii/sites/martin-kaptein/preview/assets/svg/svg-map.svg#instagram"/></svg> </a><a href="https://linkedin.com/in/martin-kaptein-a26661159" aria-label="LinkedIn"><svg><use xlink:href="file:///Users/mkaptein172/Documents/Publii/sites/martin-kaptein/preview/assets/svg/svg-map.svg#linkedin"/></svg> </a><a href="https://www.youtube.com/channel/UCosUIzMUriRTgg60vh3EwCQ" aria-label="Youtube"><svg><use xlink:href="file:///Users/mkaptein172/Documents/Publii/sites/martin-kaptein/preview/assets/svg/svg-map.svg#youtube"/></svg></a></div><div class="footer__copyright">copyright 2019 Martin Kaptein</div><button class="footer__bttop js-footer__bttop" aria-label="Back to top"><svg><title>Back to top</title><use xlink:href="file:///Users/mkaptein172/Documents/Publii/sites/martin-kaptein/preview/assets/svg/svg-map.svg#toparrow"/></svg></button></footer></div><script>window.publiiThemeMenuConfig = {    
        mobileMenuMode: 'sidebar',
        animationSpeed: 300,
        submenuWidth: 'auto',
        doubleClickTime: 500,
        mobileMenuExpandableSubmenus: true, 
        relatedContainerForOverlayMenuSelector: '.top',
   };</script><script defer="defer" src="file:///Users/mkaptein172/Documents/Publii/sites/martin-kaptein/preview/assets/js/scripts.min.js?v=f56b13ba141d95ea2a0b7aab75ca9528"></script><script>var lazyFeaturedImage=function lazyFeaturedImage(){var b=document.querySelectorAll(".hero__image-img");for(var a=0;a<b.length;a++){var c=b[a];c.addEventListener("lazyloaded",function(f){var d=f.target.parentNode;d.classList.add("hero__image--overlay")})}};lazyFeaturedImage();</script><script defer="defer" src="file:///Users/mkaptein172/Documents/Publii/sites/martin-kaptein/preview/assets/js/svg2js.js?v=40fc79392cdbfce01bc3d3237f347d96"></script><script defer="defer" src="file:///Users/mkaptein172/Documents/Publii/sites/martin-kaptein/preview/assets/js/svg-fix.js?v=7c0d2bb7276904b382e80bf2d85e8a96"></script><div class="cookie-popup js-cookie-popup cookie-popup--uses-badge"><h2>This website uses cookies and Google Analytics</h2><p>Select which cookies to opt-in to via the checkboxes below; our website uses cookies and Google Analytics to examine site traffic and user activity while on our site, for marketing, and to provide social media functionality. This website uses cookies to ensure you get the best experience on our site and to provide a comment feature. To analyze our traffic, we use basic Google Analytics implementation with anonymized data. If you continue without changing your settings, we'll assume that you are happy to receive all cookies on the website of Martin Kaptein. To understand more about how we use cookies, or for information on how to change your cookie settings, please see our Privacy Policy. <a href="file:///Users/mkaptein172/Documents/Publii/sites/martin-kaptein/preview/privacy-policy/index.html">More details...</a></p><form><input id="gdpr-necessary" name="gdpr-necessary" checked="checked" disabled="disabled" type="checkbox"> <label for="gdpr-necessary">Required</label> <input id="gdpr-functions" name="gdpr-functions" type="checkbox"> <label for="gdpr-functions">Functionality</label> <input id="gdpr-analytics" name="gdpr-analytics" type="checkbox"> <label for="gdpr-analytics">Analytical</label> <input id="gdpr-marketing" name="gdpr-marketing" type="checkbox"> <label for="gdpr-marketing">Marketing</label><p class="cookie-popup__save-wrapper"><button type="submit" class="cookie-popup__save">Save</button></p></form><span class="cookie-popup-label">Cookie Policy</span></div><script>(function() {
                function addScript (src, inline) {
                    var newScript = document.createElement('script');

                    if (src) {
                        newScript.setAttribute('src', src);
                    }

                    if (inline) {
                        newScript.text = inline;
                    }

                    document.body.appendChild(newScript);
                }

                var popup = document.querySelector('.js-cookie-popup');
                var checkboxes = popup.querySelectorAll('input[type="checkbox"]');
                var save = popup.querySelector('button');
                var currentConfig = localStorage.getItem('publii-gdpr-allowed-cookies');
                var blockedScripts = document.querySelectorAll('script[type^="gdpr-blocker/"]');
                

                popup.addEventListener('click', function() {
                    if (!popup.classList.contains('cookie-popup--is-sticky')) {
                        popup.classList.add('cookie-popup--is-sticky');
                    }
                });

                save.addEventListener('click', function(e) {
                    e.preventDefault();
                    e.stopPropagation();
                    popup.classList.remove('cookie-popup--is-sticky');
                    var allowedGroups = [];

                    for (var i = 0; i < checkboxes.length; i++) {
                        if (checkboxes[i].checked) {
                            var groupName = checkboxes[i].getAttribute('name').replace('gdpr-', '');
                            var scripts = document.querySelectorAll('script[type="gdpr-blocker/' + groupName + '"]');

                            for (var j = 0; j < scripts.length; j++) {
                                addScript(scripts[j].src, scripts[j].text);
                            }

                            allowedGroups.push(groupName);
                        }
                    }

                    localStorage.setItem('publii-gdpr-allowed-cookies', allowedGroups.join(','));
                    popup.classList.remove('cookie-popup--is-sticky');

                    setTimeout(function () {
                        if (currentConfig !== null) {
                            window.location.reload();
                        }
                    }, 250);
                });

                if (currentConfig === null) {
                    popup.classList.add('cookie-popup--is-sticky');
                } else {
                    if (currentConfig !== '') {
                        var allowedGroups = currentConfig.split(',');

                        for (var i = 0; i < allowedGroups.length; i++) {
                            var scripts = document.querySelectorAll('script[type="gdpr-blocker/' + allowedGroups[i] + '"]');
                            var checkbox = popup.querySelector('input[type="checkbox"][name="gdpr-' + allowedGroups[i] + '"]');

                            if (checkbox) {
                                checkbox.checked = true;
                            }

                            for (var j = 0; j < scripts.length; j++) {
                                addScript(scripts[j].src, scripts[j].text);
                            }
                        }
                    }
                }
            })();</script></body></html>